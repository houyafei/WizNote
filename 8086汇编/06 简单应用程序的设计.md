# 一 字符串操作指令

## 1 字符串处理

8086/8088共有5种基本的串操作指令。DS:SI指向源串，ES:DI指向目的串。串操作指令执行时会自动调整作为指针使用的寄存器SI和DI的值。

DF=0，SI或DI的值递增，DF=1时，SI或DI的值递减，变化的值根据操作单元是字节还是字决定。

**1）字符串装入指令(LODS、LODSB、LODSW)**

把字符串中的一个字符装入到累加器中（不影响标志位）。相当于：

MOV  AL,[SI] ; INC SI或DEC SI

MOV  AX,[SI] ; ADD SI,2或 SUB SI,2

**2）字符串存储指令(STOS、STOSB、STOSW)**

把累加器的值存到字符串中，即替换字符串中一个字符（不影响标志位），相当于：

MOV  ES:[DI],AL ; INC SI或DEC SI

MOV  ES:[DI],AX ; ADD DI,2或SUB DI,2

**3）字符串传送指令(MOVS、MOVSB、MOVSW)**

把SI所指向的一个字节或一个字数据传送到DI所指向的存储单元中。（不影响标志位）,相当于：

MOV   ES:[DI],DS:[SI]

**4）字符串扫描指令(SCAS、SCASB、SANSW)**

把累加器AL或AX的内容和DI指向的内容用相减方式比较，相减结果会反映到各有关标志位，然后根据DF的值增加或减少。

**5）字符串比较指令(CMPS、CMPSB、CMPSW)**

把寄存器SI指向的数据与DI指向的数据采用相减方式比较，结果反映到标志位中

## 2 重复前缀

串操作每次只能对字符串中的一个字符进行处理，所以需要一个循环，以便完成对整个字符串的处理。8086/8088提供了重复指令前缀。

**1）重复前缀REP**

REP用作为一个串操作的前缀，它重复其后的串操作指令动作。每一次重复都先判断CX的值。

CX=0结束重复，CX=1,CX减1，重复其后的串操作指令。

**2）重复前缀REPZ/REPE**

每重复一次，CX的值减1，重复一直进行到CX=0或串操作指令使ZF=0为止。

主要用于字符串比较指令CMPS和字符串扫描指令SCAS之前。

**3）重复前缀REPNZ/REPNE**

与REPZ类型，不同的是进行到CX=0或串操作指令使ZF=1为止。

主要用于字符串扫描指令SCAS之前。REPNZ与SCAS指令配合，表示当不等于时继续扫描，一直搜索到字符串结束。

# 二 十进制数算数运算调整指令及应用

**1 组合BCD码的算数运算调整指令** 

1）加法DAA

2）减法DAS

**2 未组合BCD码的算术调整指令**

1）加法AAA

2）减法AAS

3）乘法AAM

4）除法AAD

# 三 DOS程序段前缀和特殊情况处理程序（略）

**1 DOS程序段前缀PSP**

程序段前缀时DOS加载一个外部命令或应用程序时，在程序段之前设置的一个具有256字节的信息区。

1）程序段前缀PSP

2）终止程序的另一途径

3）应用程序取得命令行参数

**2 对Ctrl+C键和Ctrl+Break键的处理**

**四 TSR程序设计举例（略）**

  TSR(Terminate and Stay Resident)意为结束并驻留。TSR程序时一种特殊的DOS应用程序，不同于结束即退出的一般DOS应用程序。

TSR程序装入内存并初次运行后，程序的大部分仍驻留内存，被某种条件激活后又投入运行。它能及时地处理许多暂住程序不能处理的事情，

并可为单任务操作系统DOS增添一定的多任务处理能力。